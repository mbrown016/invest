import requests
import time

class Financials():

    def __init__(self):
        self.user = '4c17b4af06c36748f2517f1651a442ae'
        self.pw = 'd4391357b369d6288e31652c22e2cc69'
        self.date = time.strftime('%Y-%m-%d')
        self.url = 'https://www.intrinio.com/api/financials/standardized'


    def income_statement(self):
        pass

    def balance_sheet(self):
        pass

    def cashflow_statement(self, ticker):
        self.ticker = ticker.upper()
        payload = {'ticker': ticker, 'statement': 'cash_flow_statement', 'type': 'TTM', 'date': Financials.date}
        response = requests.get(Financials.url, params = payload, auth = (Financials.user, Financials.pw))
        data = response.json().get('data')
        clean_data = {}

        for val in data:
            tag = val.get('tag')
            value = val.get('value')
            clean_data[tag] = value

        print(clean_data)



if __name__ == '__main__':
    Financials.cashflow_statement('cvx')

            
        
